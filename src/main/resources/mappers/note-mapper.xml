<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="noteMapper">
<resultMap id="noteResultMap" type="NoteDto">
	<result column="SEND_NO" property="sendNo"/>
	<result column="TITLE" property="title"/>
	<result column="CONTENT" property="content"/>
	<result column="SENT_DATE" property="sentDate"/>
	<result column="SEND_ID" property="sentId"/>
	<result column="STATUS" property="status"/>
	<result column="TEMP_STORAGE" property="tempStorage"/>
	<result column="RECEPTION_ID" property="receptionId"/>
	<result column="RECEPTION_NO" property="receptionNo"/>
	<result column="RECEP_ID" property="recepId"/>
	<result column="REC_CHECK" property="recCheck"/>
	<result column="REC_DATE" property="recDate"/>
</resultMap>


	<select id="selectRecepCount" resultType="_int">
	select
				count(*)
		FROM  
	   		 TBL_RECEPTION_NOTE
	WHERE 
	    	 RECEP_ID = #{empNo}
		  and
		     STATUS = #{status} 		
				
	
	</select>
	
	<select id="selectSendCount" resultType="_int">
	select
				count(*)
		FROM  
	   		 TBL_SEND_NOTE
	WHERE 
	    	 SEND_ID = #{empNo}
		  and
		     STATUS = #{status} 		
				
	
	</select>
	
	<select id="selectInBox" resultMap="noteResultMap">
		SELECT 
			    RECEPTION_NO,
					SEND_NO,
					SENT_ID,
					RECEP_ID,
					TITLE,
					CONTENT,
					REC_CHECK,
					REC_DATE,
					STATUS
	FROM 
	    TBL_RECEPTION_NOTE
	WHERE 
	    RECEP_ID = #{empNo}
	    and
		     STATUS = 'Y'  
	</select>
	<select id="selectSendList" resultMap="noteResultMap">
		SELECT
					SEND_NO,
					TITLE,
					CONTENT,
					SENT_DATE,
					SEND_ID,
					STATUS,
					TEMP_STORAGE,
					RECEPTION_ID
	    FROM 
	   			TBL_SEND_NOTE
	   WHERE 
			    SEND_ID = #{empNo}
			    and
				  STATUS = 'Y'  			
	</select>
	<select id="selectTemporayList" resultMap="noteResultMap">
		SELECT
					SEND_NO,
					TITLE,
					CONTENT,
					SENT_DATE,
					SEND_ID,
					STATUS,
					TEMP_STORAGE,
					RECEPTION_ID
	    FROM 
	   			TBL_SEND_NOTE
	   WHERE 
			    SEND_ID = #{empNo}
			    and
				  STATUS = 'Y'  			
			    and
				  TEMP_STORAGE = 'Y'  			
	</select>
	
	
	
	<!-- 
	<insert id="sendNote">
	INSERT INTO 
			         TBL_NOTE 
							(
							 NOTE_ID, 
							 NOTE_TITLE, 
							 NOTE_CONTENT, 
							 SENT_TIME, 
							 SEND_ID, 
							 DELIVER_ID, 
							 STATUS, 
							 RECEIVED_TIME, 
							 EMP_NO
							 )
							 VALUES
							 (
							 NOTE_NO_SEQ.NEXTVAL,
							 #{title},
							 #{content},
							 sysdate,
							 #{sentId},
							 #{deliverId},
							 'Y',
							 sysdate,
							 #{sentId}
							 )
							
	</insert>	   
	 -->
</mapper>
